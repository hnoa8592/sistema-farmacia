<div class="surface-card shadow-2 border-round p-4">
  <div class="flex align-items-center justify-content-between mb-4">
    <h2 class="m-0 text-900 font-bold"><i class="pi pi-prime mr-2 text-indigo-500"></i>Principios Activos</h2>
    <p-button *appPermiso="'catalogos:editar'" label="Nuevo" icon="pi pi-plus" (onClick)="nuevo()"></p-button>
  </div>
  <p-table [value]="items" [loading]="cargando" responsiveLayout="scroll" styleClass="p-datatable-sm">
    <ng-template pTemplate="header"><tr><th>Nombre</th><th>Descripción</th><th class="text-center">Activo</th><th class="text-center" *appPermiso="'catalogos:editar'">Acciones</th></tr></ng-template>
    <ng-template pTemplate="body" let-item>
      <tr>
        <td class="font-medium">{{ item.nombre }}</td>
        <td class="text-500">{{ item.descripcion || '—' }}</td>
        <td class="text-center"><p-tag [value]="item.activo ? 'Activo' : 'Inactivo'" [severity]="item.activo ? 'success' : 'danger'"></p-tag></td>
        <td class="text-center" *appPermiso="'catalogos:editar'">
          <p-button icon="pi pi-pencil" styleClass="p-button-text p-button-sm" (onClick)="editar(item)"></p-button>
          <p-button icon="pi pi-trash" styleClass="p-button-text p-button-sm p-button-danger" (onClick)="eliminar(item)"></p-button>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage"><tr><td colspan="4" class="text-center text-500 py-4">Sin principios activos</td></tr></ng-template>
  </p-table>
</div>
<p-dialog [header]="itemSeleccionado ? 'Editar' : 'Nuevo Principio Activo'" [(visible)]="mostrarFormulario" [modal]="true" [style]="{width:'400px'}">
  <form [formGroup]="form" class="p-fluid">
    <div class="field"><label class="font-medium">Nombre *</label><input type="text" pInputText formControlName="nombre" /></div>
    <div class="field"><label class="font-medium">Descripción</label><textarea pInputTextarea formControlName="descripcion" rows="2"></textarea></div>
  </form>
  <ng-template pTemplate="footer">
    <p-button label="Cancelar" styleClass="p-button-outlined" (onClick)="mostrarFormulario = false"></p-button>
    <p-button label="Guardar" [loading]="guardando" (onClick)="guardar()"></p-button>
  </ng-template>
</p-dialog>
<p-confirmDialog></p-confirmDialog><p-toast></p-toast>
